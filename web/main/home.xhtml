<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:of="http://omnifaces.org/functions">



    <ui:composition template="/template.xhtml">
        <p:idleMonitor timeout="1"></p:idleMonitor>

        <ui:define name="title">
            <h:outputText value="Inicio"></h:outputText>
        </ui:define>

        <ui:define name="body">

            <style type="text/css">
                .sideBar
                {

                    height: 100%;
                    background: rgba(254,254,254,1);
                    background: -moz-linear-gradient(left, rgba(254,254,254,1) 0%, rgba(219,219,219,0.9) 72%, rgba(209,209,209,0.86) 99%, rgba(226,226,226,0.86) 100%);
                    background: -webkit-gradient(left top, right top, color-stop(0%, rgba(254,254,254,1)), color-stop(72%, rgba(219,219,219,0.9)), color-stop(99%, rgba(209,209,209,0.86)), color-stop(100%, rgba(226,226,226,0.86)));
                    background: -webkit-linear-gradient(left, rgba(254,254,254,1) 0%, rgba(219,219,219,0.9) 72%, rgba(209,209,209,0.86) 99%, rgba(226,226,226,0.86) 100%);
                    background: -o-linear-gradient(left, rgba(254,254,254,1) 0%, rgba(219,219,219,0.9) 72%, rgba(209,209,209,0.86) 99%, rgba(226,226,226,0.86) 100%);
                    background: -ms-linear-gradient(left, rgba(254,254,254,1) 0%, rgba(219,219,219,0.9) 72%, rgba(209,209,209,0.86) 99%, rgba(226,226,226,0.86) 100%);
                    background: linear-gradient(to right, rgba(254,254,254,1) 0%, rgba(219,219,219,0.9) 72%, rgba(209,209,209,0.86) 99%, rgba(226,226,226,0.86) 100%);
                    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fefefe', endColorstr='#e2e2e2', GradientType=1 );
                    border-right: 1px solid #aaa;
                    overflow:hidden;
                    -webkit-box-shadow: -4px 0px 21px 0px rgba(50, 50, 50, 0.75);
                    -moz-box-shadow:    -4px 0px 21px 0px rgba(50, 50, 50, 0.75);
                    box-shadow:         -4px 0px 21px 0px rgba(50, 50, 50, 0.75);

                }




                .fila{
                    display: table-row;width: 100%;
                }
            </style>
            <div class="ui-grid ui-grid-responsive" style="height: 100%">

                <div class="ui-grid-row" style="height: 100%">
                    <div class="ui-grid-col-8">
                        <div class="ui-grid ui-grid-responsive" style="height: 100%">
                            <div class="ui-grid-row" style="height: 95%">
                                <div class="ui-grid-col-12" style="height: 100%">
                                    <div style="text-align: center;height: 100%;overflow: auto">


                                        <o:graphicImage id="myImage" styleClass="myImage" value="#{imagenController.obtNextImage(facturasBean.nombreArchivoSiguiente)}"
                                                        style="max-width:100%;max-height:100%;vertical-align: middle;"/>






                                    </div>
                                </div>
                            </div>
                            <div class="ui-grid-row" style="height: 5%">
                                <div class="ui-grid-col-12">
                                    <h:form style="margin: 0 auto 0 auto">
                                        <div style="width: 300px;margin: 0 auto 0 auto">
                                            <pe:imageRotateAndResize id="rotateAndResize" for="@(.myImage)" widgetVar="rotateAndResizeWidget"/>
                                            <p:commandButton icon="ui-icon-arrowreturnthick-1-w" value="Girar "  
                                                             onclick="PF('rotateAndResizeWidget').rotateLeft(90);
                                                                     return false;"/>  
                                            <p:commandButton icon="ui-icon-arrowreturnthick-1-e" value="Girar"  
                                                             onclick="PF('rotateAndResizeWidget').rotateRight(90);
                                                                     return false;"/>  
                                            <p:commandButton icon="ui-icon-zoomin" value="Zoom +"  
                                                             onclick="PF('rotateAndResizeWidget').scale(1.05);
                                                                     return false;"/>  
                                            <p:commandButton icon="ui-icon-zoomout" value="Zoom -"  
                                                             onclick="PF('rotateAndResizeWidget').scale(0.95);
                                                                     return false;"/> 
                                        </div>

                                    </h:form>
                                </div>
                            </div>
                        </div>




                    </div>

                    <div class="ui-grid-col-4" style="height: 100%">
                        <div class="sideBar">
                            <div style="padding: 20px;width: 100%">
                                <h:form>

                                    <div style="display: table;width: 100%">
                                        <div class="fila">
                                            <h:outputText value="Cliente:" style="font-weight: bold"/>
                                            <br/>
                                        </div>
                                        <div class="fila">

                                            <p:inputText placeholder="RUC del Cliente" value="#{facturasBean.ruc}"
                                                         style="width: 50%;margin-top: 5px;">
                                                <p:ajax event="blur" update="cvCliente razonSocialCliente"
                                                        process="@this cvCliente razonSocialCliente" 
                                                        listener="#{facturasBean.buscarContribuyenteCliente()}"/>
                                            </p:inputText>
                                            <p:inputText placeholder="CV" value="#{facturasBean.cvCliente}"
                                                         id="cvCliente" size="1"
                                                         style="width: 5%;margin-top: 5px;"/>

                                            <br/>
                                        </div>
                                        <div class="fila">

                                            <p:inputText id="razonSocialCliente"
                                                         style="margin-top: 5px;width: 90%"
                                                         placeholder="RAZON SOCIAL CLIENTE" value="#{facturasBean.actual.razonSocialCliente}"/>

                                            <br/>
                                        </div>

                                        <div class="fila">

                                            <p:separator style="margin-top: 5px;margin-bottom: 10px;"/>

                                        </div>

                                        <div class="fila">
                                            <div style="display: table;margin: 0 auto 0 auto">
                                                <div style="display: table-row;width: 100%">
                                                    <div style="display: table-cell;width:25%; vertical-align: middle;margin-top: 5px;margin-bottom: 5px">
                                                        <h:outputText value="Tipo Impuesto: " style="font-weight: bold"
                                                                      />
                                                    </div>
                                                    <div style="display: table-cell;vertical-align: middle;width:75%; ">
                                                        <p:selectOneMenu value="#{facturasBean.actual.tipoImpuesto}" style="margin-top: 5px;margin-bottom: 5px;">
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{productorEnums.obtTiposImpuestos()}"
                                                                           var="e" itemLabel="#{e.value}" itemValue="#{e}"/>
                                                        </p:selectOneMenu>

                                                    </div>
                                                </div>
                                            </div>


                                            <br/>
                                        </div>


                                        <div class="fila">
                                            <div style="display: table;width: 100%">
                                                <div style="display: table-row;width: 100%">
                                                    <div style="display: table-cell;width: 50%">
                                                        <h:outputText value="Tipo Factura:" style="font-weight: bold"/>
                                                    </div>
                                                    <div style="display: table-cell;width: 50%">
                                                        <h:outputText value="Clasificación IRP:" style="font-weight: bold"/>

                                                    </div>
                                                </div>
                                                <div style="display: table-row;width: 100%">
                                                    <div style="display: table-cell;width: 50%">
                                                        <p:selectOneMenu value="#{facturasBean.actual.tipoFactura}" style="margin-top: 5px;width: 50%;margin-bottom: 5px;">
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{productorEnums.obtTiposFactura()}"
                                                                           var="e" itemLabel="#{e.value}" itemValue="#{e}"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div style="display: table-cell;width: 50%">
                                                        <p:selectOneMenu value="#{facturasBean.actual.clasificacion}" style="margin-top: 5px;width: 50%;margin-bottom: 5px;">
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{productorEnums.obtClasificacionesIRP()}"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                </div>

                                            </div>

                                            <br/>
                                        </div>



                                        <div class="fila">


                                            <div style="display: table;width: 100%">
                                                <div style="display: table-row;width: 100%">
                                                    <div style="display: table-cell;vertical-align: middle">
                                                        <h:outputText value="Tipo Ingreso:" style="font-weight: bold"
                                                                      />
                                                    </div>
                                                    <div style="display: table-cell;vertical-align: middle;width: 90%">
                                                        <p:selectOneMenu value="#{facturasBean.tipoIngresoSeleccionado}" style="margin-top: 5px;margin-bottom: 5px;">
                                                            <p:ajax process="@this" event="change" update="subTipoIngreso"/>
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{tipoIngresoController.itemsAvailableSelectOne}"/>
                                                        </p:selectOneMenu>
                                                        <p:selectOneMenu 
                                                            id="subTipoIngreso"
                                                            value="#{facturasBean.subTipoIngresoSeleccionado}" style="margin-top: 5px;margin-bottom: 5px;">
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{facturasBean.itemsSubTipoIngreso}"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                </div>

                                                <div style="display: table-row;width: 100%">
                                                    <div style="display: table-cell;vertical-align: middle">
                                                        <h:outputText value="Tipo Gastos:" style="font-weight: bold"
                                                                      />
                                                    </div>
                                                    <div style="display: table-cell;vertical-align: middle;width: 90%">
                                                        <p:selectOneMenu value="#{facturasBean.tipoGastoSeleccionado}" style="margin-top: 5px;margin-bottom: 5px;">
                                                            <p:ajax process="@this" event="change" update="subTipoGasto"/>
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{tipoGastoController.itemsAvailableSelectOne}"/>
                                                        </p:selectOneMenu>
                                                        <p:selectOneMenu 
                                                            id="subTipoGasto"
                                                            value="#{facturasBean.subTipoGastoSeleccionado}" style="margin-top: 5px;margin-bottom: 5px;">
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{facturasBean.itemsSubTipoGasto}"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                </div>

                                                <div style="display: table-row;width: 100%">
                                                    <div style="display: table-cell;vertical-align: middle">
                                                        <h:outputText value="Tipo Inversión:" style="font-weight: bold"
                                                                      />
                                                    </div>
                                                    <div style="display: table-cell;vertical-align: middle;width: 90%">
                                                        <p:selectOneMenu value="#{facturasBean.tipoInversionSeleccionado}" style="margin-top: 5px;margin-bottom: 5px;">
                                                            <p:ajax process="@this" event="change" update="subTipoInversion"/>
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{tipoInversionController.itemsAvailableSelectOne}"/>
                                                        </p:selectOneMenu>
                                                        <p:selectOneMenu 
                                                            id="subTipoInversion"
                                                            value="#{facturasBean.subTipoInversionSeleccionado}" style="margin-top: 5px;margin-bottom: 5px;">
                                                            <f:selectItem itemLabel="--" itemValue=""/>
                                                            <f:selectItems value="#{facturasBean.itemsSubTipoInversion}"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>





                                        <div class="fila">

                                            <p:separator style="margin-top: 5px;margin-bottom: 10px;"/>

                                        </div>

                                        <div class="fila">
                                            <div style="display: table">

                                                <div style="display: table-row">
                                                    <div style="display: table-cell;vertical-align: middle">
                                                        <h:outputText value="Fecha:" style="font-weight: bold"/>
                                                    </div>
                                                    <div style="display: table-cell;vertical-align: middle">
                                                        <p:calendar value="#{facturasBean.actual.fecha}" locale="es" pattern="dd/MM/yyyy" style="margin-left: 15px;"/>
                                                    </div>
                                                    <div style="display: table-cell;vertical-align: middle">
                                                        <h:outputText value="Periodo:" style="font-weight: bold;margin-left: 15px;"/>
                                                    </div>
                                                    <div style="display: table-cell;vertical-align: middle">
                                                        <p:selectOneMenu value="#{facturasBean.actual.periodo}" style="width: 75px;margin-left: 15px;">
                                                            <f:selectItem itemLabel="Ene" itemValue="Ene"/>
                                                            <f:selectItem itemLabel="Feb" itemValue="Feb"/>
                                                            <f:selectItem itemLabel="Mar" itemValue="Mar"/>
                                                            <f:selectItem itemLabel="Abr" itemValue="Abr"/>
                                                            <f:selectItem itemLabel="May" itemValue="May"/>
                                                            <f:selectItem itemLabel="Jun" itemValue="Jun"/>
                                                            <f:selectItem itemLabel="Jul" itemValue="Jul"/>
                                                            <f:selectItem itemLabel="Ago" itemValue="Ago"/>
                                                            <f:selectItem itemLabel="Sep" itemValue="Sep"/>
                                                            <f:selectItem itemLabel="Oct" itemValue="Oct"/>
                                                            <f:selectItem itemLabel="Nov" itemValue="Nov"/>
                                                            <f:selectItem itemLabel="Dic" itemValue="Dic"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                </div>
                                            </div>

                                            <br/>
                                        </div>

                                        <div class="fila">
                                            <h:outputText value="Proveedor:" style="font-weight: bold"/>
                                            <br/>
                                        </div>
                                        <div class="fila">

                                            <p:inputText placeholder="RUC del Proveedor" value="#{facturasBean.rucProveedor}"
                                                         style="width: 50%;margin-top: 5px;">
                                                <p:ajax event="blur" update="cvProveedor razonSocialProveedor"
                                                        process="@this cvProveedor razonSocialProveedor" 
                                                        listener="#{facturasBean.buscarContribuyenteProveedor()}"/>
                                            </p:inputText>
                                            <p:inputText placeholder="CV" value="#{facturasBean.cvProveedor}"
                                                         id="cvProveedor" size="1"
                                                         style="width: 5%;margin-top: 5px;"/>

                                            <br/>
                                        </div>
                                        <div class="fila">

                                            <p:inputText id="razonSocialProveedor"
                                                         style="margin-top: 5px;width: 90%"
                                                         placeholder="RAZON SOCIAL CLIENTE" value="#{facturasBean.actual.razonSocialProveedor}"/>

                                            <br/>
                                        </div>

                                        <div class="fila">

                                            <p:separator style="margin-top: 5px;margin-bottom: 10px;"/>

                                        </div>

                                        <div class="fila">
                                            <h:outputText value="Montos:" style="font-weight: bold;margin-bottom: 10px"/>
                                            <br/>
                                        </div>

                                        <div class="fila">

                                            <div style="display: table; margin-top: 10px;">
                                                <div style="display: table-row">
                                                    <div style="display: table-cell">
                                                        <h:outputText value="Exento:" style="font-weight: bold;margin-top: 10px"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="Gravada 05:" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="Gravada 10:" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>

                                                </div>

                                                <div style="display: table-row">
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;"
                                                                     value="#{facturasBean.actual.exento}"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.gravada05}"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.gravada10}"/>
                                                    </div>

                                                </div>

                                                <div style="display: table-row">
                                                    <div style="display: table-cell">
                                                        <h:outputText value="IVA 05:" style="font-weight: bold;margin-top: 10px"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="IVA 10:" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="TOTAL IVA:" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>

                                                </div>
                                                <div style="display: table-row">
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;"
                                                                     value="#{facturasBean.actual.iva05}"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.iva10}"/> 
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.totalIva}"/>
                                                    </div>

                                                </div>

                                                <div style="display: table-row">
                                                    <div style="display: table-cell">

                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="Gravada 05 Neto:" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="Gravada 10 Neto:" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>

                                                </div>
                                                <div style="display: table-row">
                                                    <div style="display: table-cell">

                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.gravada05Neto}"/> 
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.gravada10Neto}"/>
                                                    </div>

                                                </div>

                                                <div style="display: table-row">
                                                    <div style="display: table-cell">

                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="Total (Neto):" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <h:outputText value="Total (Bruto):" style="font-weight: bold;margin-top: 10px;margin-left: 10px"/>
                                                    </div>

                                                </div>
                                                <div style="display: table-row">
                                                    <div style="display: table-cell">

                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.totalNeto}"/> 
                                                    </div>
                                                    <div style="display: table-cell">
                                                        <p:inputText style="margin-top: 5px;width: 90%;margin-left: 10px"
                                                                     value="#{facturasBean.actual.totalBruto}"/>
                                                    </div>

                                                </div>

                                            </div>


                                            <br/>
                                        </div>
                                    </div>



                                    <p:commandButton value="Guardar" action="#{facturasBean.guardar()}" ajax="false"/>
                                    <p:commandButton value="Cancelar" action="#{facturasBean.limpiar()}" ajax="false" style="float: right; margin-right: 50px;"/>
                                </h:form>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </ui:define>
    </ui:composition>

</html>
